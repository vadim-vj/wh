# Code style `[style]`

---
> Что такое PEP8?

PEP8 - это документ, описывающий общепринятый стиль написания кода на языке Python. Самый известный из Python Enhanced Proposals (PEP) - предложений по улучшению/развитию языка Python. Доступен на сайте [python.org](https://www.python.org/dev/peps/pep-0008/)

Документ описывает отступы, кавычки, именование, аннотации типов и многое другое. Главный принцип - последовательное и согласованное использование стиля. Согласованность внутри проекта важнее согласованности с этим руководством

---
> Назовите основные моменты PEP8

- использовать 4 пробела вместо табуляции
- ограничить длину строк кода 79 символами, а строк документации и комментариев - 72
- классы пишутся в `CamelCase`, глобальные константы - в `UPPER_CASE_WITH_UNDERSCORES`, а остальные в `lower_case_with_underscores`
- операнды (низкоприоритетных) бинарных операторов отделяются пробелами, скобки снаружи и внутри пробелами не отделяются
- импорты пишутся в отдельных строках, в начале файла
- предпочитайте `def` присваиванию лямюда-функции именованному выражению, используйте неявные проверки в `if` вместо явных
- комментарии пишутся на английском языке, строки документации подчиняются PEP257

---
> Какие есть еще документы по code style, помимо PEP8?

Например, руководство Гугл - <https://google.github.io/styleguide/pyguide.html>. Оно, в частности, предписывает использовать pylint

Есть еще некоторые, вроде того что в онлайн-книге "The Hitchhiker's Guide to Python" (<https://docs.python-guide.org/writing/style/>), или у системы управления контентом CKAN (<https://docs.ckan.org/en/latest/contributing/python.html>)


---
> Какие вы знаете инструменты для управления стилем кода? Приведите их краткий обзор

Они делятся на 2 группы:

Линтеры - статический анализ кода на предмет ошибок:

- `pycodestyle` - простая консольная утилита, до 2016 года называлась `pep8`
- `pydocstyle` - утилита проверки docstring-ов у классов, функций и модулей на соответствие PEP257
- `pyflakes` - очень простая утилита поиска синтаксических ошибок
- `flake8` - обертка над `pycodestyle` + `pyflakes`. Работает с хуками Git-а
- `pylint` - самый "тяжелый" и многословный линтер, поддерживает настройку своих проверок прямо через комментарии в коде
- `prospector` - обвязка над `pylint`, `pycodestyle`, `pyflakes` и другими

Форматтеры - автоматически вносящие изменения: `autopep8`, `black`, `yapf` (гугловая). Все примерно похожи

---
> Как вы следуете PEP8 и стилю кода вообще?

Я использую VSCode с расширением Python. В принципе, мне хватает базовой функциональности инструментов:

- в качестве линтера - включенный по умолчанию `pylint`, могу иногда и из консоли его запустить
- на уровне проекта иногда включаю/отключаю проверку docstring-ов в `pylint`, т.к. она не всегда нужна в простых скриптах
- в качестве форматтера использую включенный по умолчанию `autopep8`
- для статической проверки аннотаций типов использую `mypy`
